

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Release Guide &mdash; napari 0.2.12+37.g7a831db documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Code of Conduct - How to follow up on a report" href="REPORT_HANDLING_MANUAL.html" />
    <link rel="prev" title="Mission and Values" href="MISSION_AND_VALUES.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> napari
          

          
            
            <img src="../_static/napari_logo.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                0.2.12+37.g7a831db
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../plugins/index.html">Plugins</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api.html">API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../releases.html">Release Notes</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../developers.html">Developer Resources</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="BENCHMARKS.html">Benchmarks</a></li>
<li class="toctree-l2"><a class="reference internal" href="CODE_OF_CONDUCT.html">Code of Conduct</a></li>
<li class="toctree-l2"><a class="reference internal" href="CONTRIBUTING.html">Contributing Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="CORE_DEV_GUIDE.html">Core Developer Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="GOVERNANCE.html">Governance Model</a></li>
<li class="toctree-l2"><a class="reference internal" href="MISSION_AND_VALUES.html">Mission and Values</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Release Guide</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#determining-the-version">determining the version</a></li>
<li class="toctree-l3"><a class="reference internal" href="#generating-release-notes">generating release notes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#tagging-the-new-release-candidate">Tagging the new release candidate</a></li>
<li class="toctree-l3"><a class="reference internal" href="#creating-the-distribution">creating the distribution</a></li>
<li class="toctree-l3"><a class="reference internal" href="#uploading-the-release-candidate-to-pypi">uploading the release candidate to PyPI</a></li>
<li class="toctree-l3"><a class="reference internal" href="#generating-the-actual-release">Generating the actual release</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="REPORT_HANDLING_MANUAL.html">Code of Conduct - How to follow up on a report</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference external" href="https://napari.org">Home</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/napari/napari">Source Code</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">napari</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../developers.html">Developer Resources</a> &raquo;</li>
        
      <li>Release Guide</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/developers/RELEASE.md.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="release-guide">
<h1>Release Guide<a class="headerlink" href="#release-guide" title="Permalink to this headline">¶</a></h1>
<p>This guide documents <code class="docutils literal notranslate"><span class="pre">napari</span></code>’s release process.
Currently, it only handles distribution, but as the project matures,
it will include generating release notes, documentation, etc.</p>
<p>This is mainly meant for the core developers who will actually be performing the release.
They will need to have a <a class="reference external" href="https://pypi.org">PyPI</a> account with upload permissions to the <code class="docutils literal notranslate"><span class="pre">napari</span></code> package.</p>
<p>You will also need the additional <code class="docutils literal notranslate"><span class="pre">release</span></code> dependencies in <code class="docutils literal notranslate"><span class="pre">requirements/release.txt</span></code> to complete the release process.</p>
<div class="section" id="determining-the-version">
<h2>determining the version<a class="headerlink" href="#determining-the-version" title="Permalink to this headline">¶</a></h2>
<p>The version of <code class="docutils literal notranslate"><span class="pre">napari</span></code> is automatically determined by <a class="reference external" href="https://github.com/warner/python-versioneer"><code class="docutils literal notranslate"><span class="pre">versioneer</span></code></a>
from the latest <a class="reference external" href="https://git-scm.com/book/en/v2/Git-Basics-Tagging"><code class="docutils literal notranslate"><span class="pre">git</span></code> tag</a> beginning with <code class="docutils literal notranslate"><span class="pre">v</span></code>.
Thus, you’ll need to tag the <a class="reference external" href="https://git-scm.com/book/en/v2/Git-Internals-Git-References">reference</a> with the new version number. It is likely something like <code class="docutils literal notranslate"><span class="pre">X.Y.Z</span></code>. Before making a release though we need to generate the release notes.</p>
</div>
<div class="section" id="generating-release-notes">
<h2>generating release notes<a class="headerlink" href="#generating-release-notes" title="Permalink to this headline">¶</a></h2>
<ol>
<li><p>Review and cleanup <code class="docutils literal notranslate"><span class="pre">docs/release/release_dev.txt</span></code>. This may be empty if it has not been
updated during work on the last release.</p></li>
<li><p>Make a list of merges, contributors, and reviewers by running
<code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">docs/release/generate_release_notes.py</span> <span class="pre">-h</span></code> and following that file’s usage. For minor or major releases generate the list to include everything since the last minor or major release.
For other releases generate the list to include
everything since the last release for which there
are release notes (which should just be the last release). For example making the release notes
for the <code class="docutils literal notranslate"><span class="pre">0.2.0</span></code> release can be done as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">python</span> <span class="n">docs</span><span class="o">/</span><span class="n">release</span><span class="o">/</span><span class="n">generate_release_notes</span><span class="o">.</span><span class="n">py</span> <span class="n">v0</span><span class="o">.</span><span class="mf">1.0</span> <span class="n">master</span> <span class="o">--</span><span class="n">version</span> <span class="mf">0.2</span><span class="o">.</span><span class="mi">0</span> <span class="o">|</span> <span class="n">tee</span> <span class="n">docs</span><span class="o">/</span><span class="n">release</span><span class="o">/</span><span class="n">release_0_2_0</span><span class="o">.</span><span class="n">rst</span>
</pre></div>
</div>
</li>
<li><p>Paste this list at the end of the <code class="docutils literal notranslate"><span class="pre">release_dev.txt</span></code>.</p></li>
<li><p>Scan the PR titles for highlights, deprecations, API changes,
and bugfixes, and mention these in the relevant sections of the notes.
Try to present the information in an expressive way by mentioning
the affected functions, elaborating on the changes and their
consequences. If possible, organize semantically close PRs in groups.</p></li>
<li><p>Make sure the file name is of the form <code class="docutils literal notranslate"><span class="pre">doc/release/release_&lt;major&gt;_&lt;minor&gt;_&lt;release&gt;.txt</span></code>.</p></li>
<li><p>Copy <code class="docutils literal notranslate"><span class="pre">doc/release/release_template.txt</span></code> to
<code class="docutils literal notranslate"><span class="pre">doc/release/release_dev.txt</span></code> for the next release.</p></li>
<li><p>Copy relevant deprecations from <code class="docutils literal notranslate"><span class="pre">release_&lt;major&gt;_&lt;minor&gt;_&lt;release&gt;.txt</span></code>
to <code class="docutils literal notranslate"><span class="pre">release_dev.txt</span></code>.</p></li>
<li><p>Make and merge a PR with these release notes before moving onto the next steps.</p></li>
</ol>
</div>
<div class="section" id="tagging-the-new-release-candidate">
<h2>Tagging the new release candidate<a class="headerlink" href="#tagging-the-new-release-candidate" title="Permalink to this headline">¶</a></h2>
<p>First we will generate a release candidate, which will contain the letters <code class="docutils literal notranslate"><span class="pre">rc</span></code>.
Using release candidates allows us to test releases on PyPi without using up the actual
release number.</p>
<p>You should include a basic message with the tag <code class="docutils literal notranslate"><span class="pre">&quot;Version</span> <span class="pre">X.Y.Zrc1&quot;</span></code>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ git tag -a vX.Y.Zrc1 -m <span class="s2">&quot;Version X.Y.Zrc1&quot;</span> master
</pre></div>
</div>
<p>If the tag is meant for a previous version of master, simply reference the specific commit:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ git tag -a vX.Y.Zrc1 -m <span class="s2">&quot;Version X.Y.Zrc1&quot;</span> abcde42
</pre></div>
</div>
<p>Note here how we are using <code class="docutils literal notranslate"><span class="pre">rc</span></code> for release candidate to create a version of our release we can test
before making the real release.</p>
<p>You can read more on tagging <a class="reference external" href="https://git-scm.com/book/en/v2/Git-Basics-Tagging">here</a>.</p>
</div>
<div class="section" id="creating-the-distribution">
<h2>creating the distribution<a class="headerlink" href="#creating-the-distribution" title="Permalink to this headline">¶</a></h2>
<p>Before creating a new distribution, make sure to delete any previous ones:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ rm -rf dist build
</pre></div>
</div>
<p>Now you can build the distribution:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ python setup.py sdist bdist_wheel
</pre></div>
</div>
<p><a class="reference external" href="../MANIFEST.in"><code class="docutils literal notranslate"><span class="pre">MANIFEST.in</span></code></a> determines which non-Python files are included.
Make sure to check that all necessary ones are listed before beginning the release process.</p>
</div>
<div class="section" id="uploading-the-release-candidate-to-pypi">
<h2>uploading the release candidate to PyPI<a class="headerlink" href="#uploading-the-release-candidate-to-pypi" title="Permalink to this headline">¶</a></h2>
<p>Upload the release candidate with:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ python -m twine upload dist/napari-X.Y.Zrc1.tar.gz
</pre></div>
</div>
<p>The release candidate can then be tested with</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ pip install --pre napari
</pre></div>
</div>
<p>or</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ pip install -U --pre napari
</pre></div>
</div>
<p>if napari is already installed.</p>
<p>If the release candidate is not what you want, make your changes and repeat the process from the beginning but
incrementing the number after <code class="docutils literal notranslate"><span class="pre">rc</span></code> on tag (e.g. <code class="docutils literal notranslate"><span class="pre">vX.Y.Zrc2</span></code>).</p>
<p>Once you are satisfied with the release candidate it is time to generate the actual release.</p>
</div>
<div class="section" id="generating-the-actual-release">
<h2>Generating the actual release<a class="headerlink" href="#generating-the-actual-release" title="Permalink to this headline">¶</a></h2>
<p>To generate the actual release you will now repeat the processes above but now dropping the <code class="docutils literal notranslate"><span class="pre">rc</span></code>.
For example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ git tag -a vX.Y.Z -m <span class="s2">&quot;Version X.Y.Z&quot;</span> master
$ rm -rf dist build
$ python setup.py sdist bdist_wheel
$ python -m twine upload dist/napari-X.Y.Z.tar.gz
</pre></div>
</div>
<p>At the very end you should push the new tags to the repo.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ git push upstream --tags
</pre></div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="REPORT_HANDLING_MANUAL.html" class="btn btn-neutral float-right" title="Code of Conduct - How to follow up on a report" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="MISSION_AND_VALUES.html" class="btn btn-neutral float-left" title="Mission and Values" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, napari contributors

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>